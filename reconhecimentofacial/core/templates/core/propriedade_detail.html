{% extends 'core/base.html' %}
{% load static %}
{% block title %}{{ propriedade.nome_propriedade }} - Detalhes{% endblock %}
{% block extra_styles %}
<link rel="stylesheet" href="{% static 'core/css/propriedades.css' %}" />
{% endblock %}
{% block content %}
<div class="detail-container">
  <div class="detail-header">
    <div>
      <h1>üåæ {{ propriedade.nome_propriedade }}</h1>
      <p class="detail-subtitle">
        Cadastrado em {{ propriedade.data_cadastro|date:"d/m/Y H:i" }}
      </p>
    </div>
    <span class="badge badge-nivel-{{ propriedade.nivel_impacto }} badge-large">
      N√≠vel {{ propriedade.nivel_impacto }}
    </span>
  </div>

  <div class="detail-actions">
    <a href="{% url 'propriedades_list' %}" class="btn-secondary"> ‚Üê Voltar </a>
    <a href="{% url 'propriedade_update' propriedade.pk %}" class="btn-primary">
      ‚úèÔ∏è Editar
    </a>
    <a href="{% url 'propriedade_delete' propriedade.pk %}" class="btn-danger">
      üóëÔ∏è Excluir
    </a>
  </div>

  <div class="detail-grid">
    <div class="detail-card">
      <h3>üë§ Informa√ß√µes do Propriet√°rio</h3>
      <div class="detail-info">
        <div class="info-item">
          <span class="info-label">Nome:</span>
          <span class="info-value">{{ propriedade.proprietario }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">CPF/CNPJ:</span>
          <span class="info-value">{{ propriedade.cpf_cnpj }}</span>
        </div>
      </div>
    </div>

    <div class="detail-card">
      <h3>üìã Dados da Propriedade</h3>
      <div class="detail-info">
        <div class="info-item">
          <span class="info-label">√Årea:</span>
          <span class="info-value"
            >{{ propriedade.area_hectares }} hectares</span
          >
        </div>
        <div class="info-item">
          <span class="info-label">Data de Identifica√ß√£o:</span>
          <span class="info-value"
            >{{ propriedade.data_identificacao|date:"d/m/Y" }}</span
          >
        </div>
      </div>
    </div>

    <div class="detail-card full-width">
      <h3>üìç Localiza√ß√£o</h3>
      <div class="detail-info">
        <div class="info-item">
          <span class="info-label">Endere√ßo:</span>
          <span class="info-value">{{ propriedade.endereco }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Cidade/Estado:</span>
          <span class="info-value"
            >{{ propriedade.cidade }} - {{ propriedade.estado }}</span
          >
        </div>
        {% if propriedade.latitude and propriedade.longitude %}
        <div class="info-item">
          <span class="info-label">Coordenadas:</span>
          <span class="info-value">
            Lat: {{ propriedade.latitude }}, Long: {{ propriedade.longitude }}
            <a
              href="https://www.google.com/maps?q={{ propriedade.latitude }},{{ propriedade.longitude }}"
              target="_blank"
              class="link-maps"
            >
              üó∫Ô∏è Ver no Google Maps
            </a>
          </span>
        </div>
        {% endif %}
      </div>
    </div>

    <div class="detail-card full-width alert-card">
      <h3>‚ò†Ô∏è Informa√ß√µes sobre Agrot√≥xicos Proibidos</h3>
      <div class="detail-info">
        <div class="info-item">
          <span class="info-label">Agrot√≥xico Identificado:</span>
          <span class="info-value highlight-danger"
            >{{ propriedade.agrotoxico_utilizado }}</span
          >
        </div>
        <div class="info-item">
          <span class="info-label">N√≠vel de Impacto:</span>
          <span class="info-value">
            <span class="badge badge-nivel-{{ propriedade.nivel_impacto }}">
              {% if propriedade.nivel_impacto == 1 %}
                N√≠vel 1 - Baixo Impacto
              {% elif propriedade.nivel_impacto == 2 %}
                N√≠vel 2 - M√©dio Impacto
              {% elif propriedade.nivel_impacto == 3 %}
                N√≠vel 3 - Alto Impacto
              {% endif %}
            </span>
          </span>
        </div>
      </div>
    </div>

    <div class="detail-card full-width">
      <h3>üåä Descri√ß√£o do Impacto Ambiental</h3>
      <div class="impact-description">
        <p>{{ propriedade.descricao_impacto }}</p>
      </div>
    </div>

    <div class="detail-card full-width metadata-card">
      <h3>‚ÑπÔ∏è Informa√ß√µes do Registro</h3>
      <div class="detail-info">
        <div class="info-item">
          <span class="info-label">Cadastrado por:</span>
          <span class="info-value">
            {% if propriedade.usuario_cadastro %}
            <div class="user-badges-detail">
              <span class="badge-perfil-detail badge-perfil-{{ propriedade.usuario_cadastro.perfil.tipo_perfil|lower }}">
                {{ propriedade.usuario_cadastro.perfil.get_tipo_perfil_display_icon }} {{ propriedade.usuario_cadastro.perfil.get_tipo_perfil_display }}
              </span>
              <strong>{{ propriedade.usuario_cadastro.get_full_name|default:propriedade.usuario_cadastro.username }}</strong>
              {% if propriedade.usuario_cadastro.is_staff %}
              <span class="badge-admin-detail">üëë Admin</span>
              {% endif %}
            </div>
            {% else %}
            <span class="text-muted">N√£o informado</span>
            {% endif %}
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">Data de Cadastro:</span>
          <span class="info-value"
            >{{ propriedade.data_cadastro|date:"d/m/Y H:i" }}</span
          >
        </div>
        <div class="info-item">
          <span class="info-label">√öltima Atualiza√ß√£o:</span>
          <span class="info-value"
            >{{ propriedade.data_atualizacao|date:"d/m/Y H:i" }}</span
          >
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
